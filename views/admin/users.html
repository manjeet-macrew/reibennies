<div class="container">
   
    <div>
        <h3>Users</h3>
    </div>
    <button type="button" class="btn btn-primary" data-toggle="modal" ng-click="addUserOpenModal()" data-target="#manageUser">Add User</button>
    <br />
    <br />
    <table datatable="ng" dt-column-defs="dtColumnDefs" class="table table-bordered bordered table-striped table-condensed datatable">
        <thead>
            <tr>
                <th>#</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>State Name</th>
                <th>City</th>
                <th style="text-align: center;">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="n in UserData">
                <td>{{$index+1}}</td>
                <td>{{n.firstName}}</td>
                <td>{{n.lastName}}</td>
                <td>{{n.stateName}}</td>
                <td>{{n.City}}</td>
                <td style="text-align: center;">
                    <button type="button" ng-disabled="n.isActive=='Y'" ng-click="ActivateDeactivate(n,'Y')" class="btn btn-primary">Activate</button>
                    <button type="button" ng-disabled="n.isActive=='N'" ng-click="ActivateDeactivate(n,'N')" class="btn btn-primary">Deactivate</button>
                    <button type="button"  ng-click="OpenModal(n)" class="btn btn-primary" data-toggle="modal" data-target="#manageUser">Manage</button>
               
                 </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="modal fade" id="manageUser" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Manage User</h4>
            </div>
            <form ng-submit="Submit(UserInfo)" name="userForm" novalidate>
                <input type="hidden" ng-model="UserInfo.userId" />
                <div class="modal-body">
                    <div class="form-group">
                        <label for="State">* First Name:</label>
                        <input type="text" class="form-control" ng-model="UserInfo.firstName" required  placeholder="First Name"/>
                         <span class="validationClass" ng-show="frstNameValidation">* First Name is required</span> 
                     </div>
                    <div class="form-group">
                        <label for="email">Middle Name:</label>
                        <input type="text" class="form-control" id="mname" ng-model="UserInfo.middleName" placeholder="Middle Name" name="mname">
                    </div>
                    <div class="form-group">
                        <label for="State">* Last Name:</label>
                        <input type="text" class="form-control" ng-model="UserInfo.lastName" required placeholder="Last Name" />
                        <span class="validationClass" ng-show="lastNameValidation">* Last Name is required</span> 
                    </div>
                    <div class="form-group">
                        <label for="State">Roles Assigned:</label><span class="validationClass" ng-show="roleAssignedValidation">Please select atleast one role</span><br />
                        <span ng-repeat="rol in RolesData" class="checkbox-inline">
                            <input type="checkbox" checklist-model="UserRoles.roles" checklist-value="rol.roleId" ng-required="UserRoles.roles.length==0"> {{rol.roleName}}<br>
                        </span>

                    </div>
                    <div class="form-group" ng-hide="UserInfo.userId>0">
                        <label for="usrName">User Name:</label>
                        <input type="text" class="form-control" id="uname" ng-model="UserInfo.userName" placeholder="User Name" name="uname">
                    </div>
                    <div class="form-group" ng-hide="UserInfo.userId>0">
                        <label for="password">password:</label>
                        <input type="password" class="form-control" id="pswrd" ng-model="UserInfo.Password" placeholder="Password" name="pswrd">
                    </div>
                    <div class="form-group">
                        <label for="email">* Email:</label>
                        <input required type="email" class="form-control" id="email" ng-model="UserInfo.Email" placeholder="Email" name="email">
                        <span class="validationClass" ng-show="emailValidation">* Email is required</span> 
                    </div>
                    <div class="form-group">
                        <label for="Phone">* Primary Phone:</label>
                        <input required type="text" class="form-control" id="Phone" ng-model="UserInfo.phoneOne" placeholder="Phone" name="Phone">
                        <span class="validationClass" ng-show="primaryValidation">* Primary Phone is required</span>
                    </div>
                    <div class="form-group">
                        <label for="secondryPhone">Secondary Phone:</label>
                        <input type="text" class="form-control" id="secondryPhone" ng-model="UserInfo.phoneTwo" placeholder="Secondry Phone" name="secondryPhone">
                    </div>
                    <div class="form-group">
                        <label for="Address">* Address:</label>
                        <input required type="text" class="form-control" id="Address" ng-model="UserInfo.AddressOne" placeholder="Address" name="Address">
                        <span class="validationClass" ng-show="addressValidation">* Address is required</span>
                     </div>
                    <div class="form-group">
                        <label for="Address2">Additional Address:</label>
                        <input type="text" class="form-control" id="Address2" ng-model="UserInfo.addressTwo" placeholder="Address 2" name="Address2">
                    </div>
                    <div class="form-group">
                        <label for="City">* City:</label>
                        <input required type="text" class="form-control" id="City" ng-model="UserInfo.City" placeholder="City" name="City">
                        <span class="validationClass" ng-show="cityValidation">* City is required</span>
                    </div>
                    <div class="form-group">
                        <label for="State">* State:</label>
                        <select required="required" class="form-control" ng-model="UserInfo.State" ng-options="state.stateId as state.stateName for state in States">
                            <option value="">-- Select State --</option>
                        </select>
                        <span class="validationClass" ng-show="stateValidation">* State is required</span>
                    </div>
                    <div class="form-group">
                        <label for="Zip">* Zip Code:</label>
                        <input required type="text" class="form-control" id="Zip" ng-model="UserInfo.zipCode" placeholder="Zip" name="Zip">
                        <span class="validationClass" ng-show="zipValidation">* Zip Code is required</span>
                    </div>
                   
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>

    </div>
</div>